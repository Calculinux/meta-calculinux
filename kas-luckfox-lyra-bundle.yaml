# https://github.com/siemens/kas/blob/master/docs/userguide.rst
header:
  version: 18
  includes:
    - kas-base.yaml

machine: luckfox-lyra
target: calculinux-bundle

# walnascar checkout
repos:
  meta-arm:
    url: https://git.yoctoproject.org/meta-arm
    commit: 2de04c3d31e119d4bedbea24b9c63a8c113a1ce3
    layers:
      meta-arm-bsp:
      meta-arm-toolchain:
      meta-arm:
  meta-rockchip:
    url: https://github.com/JeffyCN/meta-rockchip.git
    commit: 71aa531a2018724a713c9587059bc53fcbd05a23
    layers:
      .:
  meta-rtlwifi:
    url: https://github.com/EmbeddedAndroid/meta-rtlwifi.git
    commit: 17a54f8a3c428039ff33c5a8ff8e045b466204b3
    layers:
      .:
    patches:
      0001-rtlwifi-changes.patch:
        repo: meta-calculinux
        path: patches/rtlwifi.patch
  meta-picocalc-drivers:
    url: https://github.com/Calculinux/meta-picocalc-drivers.git
    commit: 90d7b891c5717d98bbca2843026f23326e806c6b
    layers:
      .:
  meta-rauc:
    url: https://github.com/rauc/meta-rauc.git
    commit: a0b83842d131093e89fa4fefaaa1997f05afdf62
  meta-calculinux:
    layers:
      meta-picocalc-bsp-rockchip:

local_conf_header:
  image: |
    INHERIT:append = " rockchip-image"
    
    EXTRA_WIFI_DRIVERS = "rtl8723du rtl8812au rtl8814au rtl8821cu rtl88x2bu"
    PICOCALC_DRIVERS = "picocalc-drivers-lcd picocalc-drivers-snd-pwm picocalc-drivers-snd-softpwm picocalc-drivers-kbd picocalc-drivers-mfd"

    CORE_IMAGE_EXTRA_INSTALL += " ${EXTRA_WIFI_DRIVERS} ${PICOCALC_DRIVERS} "

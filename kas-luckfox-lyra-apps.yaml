# https://github.com/siemens/kas/blob/master/docs/userguide.rst
header:
  version: 18
  includes:
    - kas-base.yaml

machine: luckfox-lyra
target: packagegroup-meta-calculinux-apps

repos:
  meta-arm:
    url: https://git.yoctoproject.org/meta-arm
    commit: 2de04c3d31e119d4bedbea24b9c63a8c113a1ce3
    layers:
      meta-arm-bsp:
      meta-arm-toolchain:
      meta-arm:
  meta-rockchip:
    url: https://github.com/JeffyCN/meta-rockchip.git
    commit: 71aa531a2018724a713c9587059bc53fcbd05a23
    layers:
      .:
  meta-rauc:
    url: https://github.com/rauc/meta-rauc.git
    commit: a0b83842d131093e89fa4fefaaa1997f05afdf62
  meta-calculinux:
    layers:
      meta-picocalc-bsp-rockchip:
      meta-calculinux-apps:

local_conf_header:
  standard: |
    PATCHRESOLVE = "noop"
    PACKAGE_CLASSES = "package_ipk"
    INHERIT += "rm_work"
  prefix_local: |
    # Set the global prefix for all packages
    prefix = "/usr/local"
    # Ensure subdirectories follow the new prefix
    bindir = "${prefix}/bin"
    # Add to EXTRA_OECONF and EXTRA_OECMAKE for all recipes
    # This will be picked up by most standard build systems
    EXTRA_OECONF += "--prefix=${prefix}"
    EXTRA_OECMAKE += "-DCMAKE_INSTALL_PREFIX=${prefix}"